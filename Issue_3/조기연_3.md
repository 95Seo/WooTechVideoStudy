## 인덱스란?
쉽게 찾아볼 수 있도록 일정한 순서에 따라 놓은 목록

데이터베이스 테이블에 대한 검색 성능을 향상시키는 자료 구조이며 WHERE 절 등을 통해 활용된다.

1. 인덱스는 항상 최신의 정렬상태를 유지
2. 인덱스도 하나의 데이터베이스 객체
3. 데이터베이스 크기의 약 10% 정도의 저장공간 필요


## 인덱스 알고리즘

### 페이지
데이터가 저장되는 단위

#### 루트 페이지
자식 페이지의 정보

#### 브랜치 페이지
자식 페이지의 정보

#### 리프 페이지
- 실제 데이터 페이지 (클러스터링 인덱스)
- 실제 데이터의 주소 페이지 (논-클러스터링 인덱스)


### Full Table Scan 

#### 특징
1. 순차적으로 접근
2. 접근 비용 감소


#### 사용
1. 적용 가능한 인덱스가 없는 경우
2. 인덱스 처리 범위가 넓은 경우
3. 크기가 작은 테이블에 액세스하는 경우


### B-Tree(Balanced-Tree)

#### 특징
1. 트리 높이가 같음
2. 자식 노드를 2개 이상 가질 수 있음
3. 기본 데이터베이스 인덱스 구조

## 인덱스 종류

### 클러스터링 인덱스
실제 데이터와 같은 무리의 인덱스

ex) 실제 데이터가 정렬된 사전

primary key 제약 조건에는 클러스터링 인덱스가 자동으로 생성된다.

#### 특징
1. 실제 데이터 자체가 정렬
2. 테이블당 1개만 존재 가능
3. 리프 페이지가 데이터 페이지
4. 아래의 제약조건 시 자동 생성
  - primary key
  - unique + not null


### 논-클러스터링 인덱스
실제 데이터와 다른 무리의 별도의 인덱스

ex) 실제 데이터 탐색에 도움을 주는 '책의 찾아보기 페이지'

unique 제약 조건에는 논-클러스터링 인덱스가 자동으로 생성된다.

#### 특징
1. 실제 데이터 페이지는 그대로
2. 별도의 인덱스 페이지 생성 -> 추가 공간 필요
3. 테이블당 여러 개 존재
4. 리프 페이지에 클러스터링 인덱스가 적용된 컬럼의 실제 값을 담고 있음
5. unique 제약조건 적용시 자동 생성
6. 직접 index 생성시 논-클러스터링 인덱스 생성

## 인덱스 적용 기준

1. 카디널리티가 높은 (중복도가 낮은) 컬럼
2. WHERE, JOIN, ORDER BY 절에 자주 사용되는 컬럼
   - 인덱스는 추가 공간이 필요로 된다.
   - 조건 절이 없다면 인덱스가 사용되지 않늗나.
3. INSERT / UPDATE / DELETE 가 자주 발생하지 않는 컬럼
4. 규모가 작지 않은 테이블


## 인덱스 사용시 주의사항
1. 잘 활용되지 않는 인덱스는 과감히 제거하자
   - WHERE 절에 사용되더라도 자주 사용해야 가치가 있다.
   - 불필요한 인덱스로 성능저하가 발생할 수 있다.
2. 데이터 중복도가 높은 컬럼은 인덱스 효과가 적다
3. 자주 사용되더라도 INSERT / UPDATE / DELETE 가 자주 일어나는지 고려해야 한다
   - 일반적인 웹 서비스와 같은 온라인 트랜잭션 환경에서 쓰기와 읽기 비율은 2:8 또는 1:9이다.
   - 조금 느린 쓰기를 감수하고 빠른 읽기를 선택하는 것도 하나의 방법이다.
