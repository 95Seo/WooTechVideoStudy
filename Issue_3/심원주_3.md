# *라라, 제로의 데이터베이스 인덱스*
[YouTube](https://youtu.be/edpYzFgHbqs)
#테코톡


## 인덱스
* 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 **검색 속도를 향상**시키기 위한 자료구조
* 데이터가 특정 기준으로 정렬되어있다면 빠르게 찾을 수 있다
* 인덱스는 메모리에 있는 파일로써, 페이지 단위(Page =16KB)로 관리된다.
* 특징
	* 항상 최신의 정렬 상태를 유지한다
	* 인덱스도 하나의 데이터베이스 객체이다
	* 데이터베이스 크기의 약 10% 정도에 해당하는 저장공간이 필요하다 
	

## 인덱스 알고리즘
### Full table scan
* 적용 가능한 인덱스가 없는 경우에 사용된다.
* 인덱스 처리 범위가 넓거나 크기가 작은 테이블에 엑세스 하는 등 인덱스를 적용해도 성능상 이점이 없을 때 사용된다.
* 전체를 비교하여 탐색하기 때문에 처리 속도가 떨어진다.
### B-tree(balanced-tree)

* 기본 데이터베이스 인덱스 구조이다.
![](%E1%84%89%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%8C%E1%85%AE_3/R1280x0.jpg)
 * 트리의 높이가 같고 한 노드 당 자식 노드가 2개 이상 가능하다. 
 * key 값과 트리구조를 이용해 데이터를 찾는다.

* 연산 과정
![](%E1%84%89%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%8C%E1%85%AE_3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-10-30%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2011.13.48.png)
	1. insert
	* 데이터 이동 있어도 페이지 내부에서 작업된다면 큰 부담은 없다. 
	* 리프페이지가 꽉 찬 경우에는 **페이지 분할**이 일어나는데 db가 느려지고 성능에 영향을 끼치게 된다.
		* 페이지 분할:비어있는 페이지를 확보하고 문제가 있는 페이지의 데이터를 공평하게 나누어 저장하는 과정
	2. Delete 
	* 데이터를 실제로 지우지 않고 사용안함 표기를 한다.
	3. Update 
	* delete를 먼저 수행한 후 insert 가 일어난다.
->  **Select 할 때에는 성능이 향상되지만 그 외 작업을 할 때는 인덱스의 조각화가 심해져 성능이 저하된다.**


## 인덱스 종류
### clustering index
 * **사전**과 같이 물리적으로 행을 재배열한다 .
 -> 인덱스 자체가 데이터이다.
 * 테이블당 1개만 생성 가능하다.
 * 사용 방법
	1. Primary key를 설정한다.
	2. Not null, unique 제약조건을 한번에 설정한다. 
### Non-clustering index(보조인덱스, 세컨더리 인덱스)
* **찾아보기**와 같이 인덱스 테이블을 별도로 생성하여 데이터를 정렬한다.
-> 인덱스 자체가 데이터가 아니라 인덱스가 가리키는 것이 데이터이다.
->  기존 데이터에 영향을 끼치지 않는다.
->  별도 인덱스 페이지를 위한 추가 공간이 필요하므로 클러스터 페이지보다 용량이 크다.
* 테이블당 여러개를 생성할 수 있다. 
* 사용 방법 
	1. Unique 제약조건 적용시 자동 생성
	2. 직접 index 생성 시 논 클러스터링 인덱스 생성 


## 인덱스를 사용하기 좋은 경우
* 카디널리티가 높은 컬럼(데이터의 **중복이 적은** 컬럼)
* Where, join, order by 등 **조건**을 나타내는 절에 자주 사용되는 컬럼
* Insert, update, delete 등 데이터의 **변경이 자주 발생하지 않는** 컬럼
* 규모가 작지 않은 테이블

인덱스를 사용하는 것 만큼이나 생성된 인덱스를 관리해주는 것도 중요하므로 사용되지 않는 인덱스는 바로 제거해야 한다.


- - - -
참조
[SQL 인덱스(INDEX)](https://ryusae.tistory.com/13)
[Database 인덱스(index)란? - MangKyu’s Diary](https://mangkyu.tistory.com/96)
[MySQL B-tree, B+tree란? (인덱스와 연관지어서) :: Carry On Progamming](https://zorba91.tistory.com/293)
